#include "test.h"


void test::run_all()
{
  get_pixel();
  pixel_color_similar();
}

void test::get_pixel()
{
  cv::Mat img = cv::imread("assets/test/test.png", cv::IMREAD_COLOR);
  
  auto test = [img](Color col, Pos pos){
    if(col != c::get_pixel(img, pos))
    {
      std::string error_msg = "Test failed at pos: (" + std::to_string(pos.x)+"," + std::to_string(pos.y) + ")";
      error_msg += "\nExpected " + col.get()+ ", but got: " + c::get_pixel(img,pos).get();
      throw std::runtime_error(error_msg.c_str());
    }
  };  
  
try
{
  test(Color(23,0,251), Pos(10,10));
  test(Color(23,0,251), Pos(10,110));
  test(Color(23,0,251), Pos(10,210));
  test(Color(23,0,251), Pos(10,310));
  test(Color(5,251,0), Pos(10,410));
  test(Color(4,251,0), Pos(10,510));
  test(Color(4,251,0), Pos(10,610));
  test(Color(246,246,10), Pos(10,710));
  test(Color(245,246,9), Pos(10,810));
  test(Color(245,246,10), Pos(10,910));
  test(Color(31,0,242), Pos(80,10));
  test(Color(32,0,242), Pos(80,110));
  test(Color(31,0,242), Pos(80,210));
  test(Color(31,1,242), Pos(80,310));
  test(Color(13,242,1), Pos(80,410));
  test(Color(13,242,0), Pos(80,510));
  test(Color(13,242,1), Pos(80,610));
  test(Color(237,237,19), Pos(80,710));
  test(Color(237,237,18), Pos(80,810));
  test(Color(237,237,18), Pos(80,910));
  test(Color(39,1,233), Pos(150,10));
  test(Color(40,0,233), Pos(150,110));
  test(Color(40,0,233), Pos(150,210));
  test(Color(39,0,233), Pos(150,310));
  test(Color(22,234,1), Pos(150,410));
  test(Color(23,234,0), Pos(150,510));
  test(Color(23,233,1), Pos(150,610));
  test(Color(228,229,28), Pos(150,710));
  test(Color(228,229,28), Pos(150,810));
  test(Color(229,228,27), Pos(150,910));
  test(Color(48,1,225), Pos(220,10));
  test(Color(47,1,225), Pos(220,110));
  test(Color(48,0,225), Pos(220,210));
  test(Color(48,1,225), Pos(220,310));
  test(Color(31,224,1), Pos(220,410));
  test(Color(31,224,1), Pos(220,510));
  test(Color(31,224,1), Pos(220,610));
  test(Color(220,221,36), Pos(220,710));
  test(Color(220,221,36), Pos(220,810));
  test(Color(220,221,35), Pos(220,910));
  test(Color(56,1,216), Pos(290,10));
  test(Color(56,1,216), Pos(290,110));
  test(Color(57,0,216), Pos(290,210));
  test(Color(56,0,215), Pos(290,310));
  test(Color(40,216,1), Pos(290,410));
  test(Color(40,215,1), Pos(290,510));
  test(Color(41,215,0), Pos(290,610));
  test(Color(212,212,44), Pos(290,710));
  test(Color(212,212,44), Pos(290,810));
  test(Color(212,212,45), Pos(290,910));
  test(Color(64,1,207), Pos(360,10));
  test(Color(65,1,207), Pos(360,110));
  test(Color(64,1,207), Pos(360,210));
  test(Color(64,1,207), Pos(360,310));
  test(Color(49,206,1), Pos(360,410));
  test(Color(49,207,1), Pos(360,510));
  test(Color(50,206,1), Pos(360,610));
  test(Color(203,204,53), Pos(360,710));
  test(Color(203,203,54), Pos(360,810));
  test(Color(203,204,53), Pos(360,910));
  test(Color(73,1,198), Pos(430,10));
  test(Color(73,2,198), Pos(430,110));
  test(Color(73,1,198), Pos(430,210));
  test(Color(73,1,198), Pos(430,310));
  test(Color(59,198,1), Pos(430,410));
  test(Color(58,198,1), Pos(430,510));
  test(Color(58,198,1), Pos(430,610));
  test(Color(195,196,62), Pos(430,710));
  test(Color(195,195,62), Pos(430,810));
  test(Color(194,196,62), Pos(430,910));
  test(Color(81,2,189), Pos(500,10));
  test(Color(81,1,189), Pos(500,110));
  test(Color(81,1,189), Pos(500,210));
  test(Color(81,1,189), Pos(500,310));
  test(Color(67,189,1), Pos(500,410));
  test(Color(68,189,2), Pos(500,510));
  test(Color(68,189,2), Pos(500,610));
  test(Color(186,187,70), Pos(500,710));
  test(Color(186,187,71), Pos(500,810));
  test(Color(186,187,70), Pos(500,910));
  test(Color(90,2,180), Pos(570,10));
  test(Color(90,1,180), Pos(570,110));
  test(Color(90,2,180), Pos(570,210));
  test(Color(90,1,180), Pos(570,310));
  test(Color(76,180,2), Pos(570,410));
  test(Color(77,180,1), Pos(570,510));
  test(Color(76,180,2), Pos(570,610));
  test(Color(177,179,79), Pos(570,710));
  test(Color(178,179,79), Pos(570,810));
  test(Color(177,178,79), Pos(570,910));
  test(Color(98,2,171), Pos(640,10));
  test(Color(99,2,171), Pos(640,110));
  test(Color(98,2,171), Pos(640,210));
  test(Color(98,1,171), Pos(640,310));
  test(Color(86,172,1), Pos(640,410));
  test(Color(85,172,2), Pos(640,510));
  test(Color(85,171,2), Pos(640,610));
  test(Color(21,255,0), Pos(640,710));
  test(Color(255,0,205), Pos(640,810));
  test(Color(169,170,88), Pos(640,910));
  test(Color(106,2,162), Pos(710,10));
  test(Color(106,2,162), Pos(710,110));
  test(Color(106,2,163), Pos(710,210));
  test(Color(107,2,162), Pos(710,310));
  test(Color(94,163,2), Pos(710,410));
  test(Color(95,163,2), Pos(710,510));
  test(Color(94,162,2), Pos(710,610));
  test(Color(0,255,150), Pos(710,710));
  test(Color(255,0,104), Pos(710,810));
  test(Color(161,162,96), Pos(710,910));
  test(Color(115,2,154), Pos(780,10));
  test(Color(115,2,154), Pos(780,110));
  test(Color(115,2,153), Pos(780,210));
  test(Color(115,2,153), Pos(780,310));
  test(Color(104,153,2), Pos(780,410));
  test(Color(103,154,2), Pos(780,510));
  test(Color(104,154,2), Pos(780,610));
  test(Color(0,221,255), Pos(780,710));
  test(Color(255,11,0), Pos(780,810));
  test(Color(152,154,105), Pos(780,910));
  test(Color(123,2,145), Pos(850,10));
  test(Color(124,3,145), Pos(850,110));
  test(Color(123,2,145), Pos(850,210));
  test(Color(123,3,144), Pos(850,310));
  test(Color(112,145,2), Pos(850,410));
  test(Color(113,145,3), Pos(850,510));
  test(Color(112,145,2), Pos(850,610));
  test(Color(144,146,113), Pos(850,710));
  test(Color(255,130,0), Pos(850,810));
  test(Color(144,145,114), Pos(850,910));
  test(Color(132,2,136), Pos(920,10));
  test(Color(131,2,136), Pos(920,110));
  test(Color(131,2,136), Pos(920,210));
  test(Color(132,3,136), Pos(920,310));
  test(Color(122,136,2), Pos(920,410));
  test(Color(121,136,2), Pos(920,510));
  test(Color(122,136,2), Pos(920,610));
  test(Color(167,0,255), Pos(920,710));
  test(Color(135,137,122), Pos(920,810));
  test(Color(135,137,123), Pos(920,910));
  test(Color(140,3,127), Pos(990,10));
  test(Color(140,2,127), Pos(990,110));
  test(Color(140,2,127), Pos(990,210));
  test(Color(140,2,127), Pos(990,310));
  test(Color(130,127,3), Pos(990,410));
  test(Color(131,127,3), Pos(990,510));
  test(Color(131,127,2), Pos(990,610));
  test(Color(126,128,131), Pos(990,710));
  test(Color(126,129,131), Pos(990,810));
  test(Color(126,128,131), Pos(990,910));
  test(Color(149,3,118), Pos(1060,10));
  test(Color(148,3,118), Pos(1060,110));
  test(Color(148,3,118), Pos(1060,210));
  test(Color(149,3,118), Pos(1060,310));
  test(Color(140,118,2), Pos(1060,410));
  test(Color(140,118,3), Pos(1060,510));
  test(Color(140,118,3), Pos(1060,610));
  test(Color(118,120,140), Pos(1060,710));
  test(Color(118,120,140), Pos(1060,810));
  test(Color(118,120,139), Pos(1060,910));
  test(Color(157,3,109), Pos(1130,10));
  test(Color(157,3,109), Pos(1130,110));
  test(Color(157,3,109), Pos(1130,210));
  test(Color(157,3,109), Pos(1130,310));
  test(Color(149,110,3), Pos(1130,410));
  test(Color(148,109,3), Pos(1130,510));
  test(Color(148,109,3), Pos(1130,610));
  test(Color(109,111,148), Pos(1130,710));
  test(Color(109,111,148), Pos(1130,810));
  test(Color(109,112,148), Pos(1130,910));
  test(Color(165,3,100), Pos(1200,10));
  test(Color(166,3,100), Pos(1200,110));
  test(Color(165,3,100), Pos(1200,210));
  test(Color(165,3,100), Pos(1200,310));
  test(Color(158,101,4), Pos(1200,410));
  test(Color(157,101,3), Pos(1200,510));
  test(Color(158,100,3), Pos(1200,610));
  test(Color(101,103,158), Pos(1200,710));
  test(Color(101,104,157), Pos(1200,810));
  test(Color(101,103,157), Pos(1200,910));
  test(Color(173,3,92), Pos(1270,10));
  test(Color(173,3,92), Pos(1270,110));
  test(Color(173,4,91), Pos(1270,210));
  test(Color(173,4,91), Pos(1270,310));
  test(Color(166,91,3), Pos(1270,410));
  test(Color(167,91,3), Pos(1270,510));
  test(Color(167,92,4), Pos(1270,610));
  test(Color(92,95,166), Pos(1270,710));
  test(Color(93,95,166), Pos(1270,810));
  test(Color(93,96,166), Pos(1270,910));
  test(Color(182,3,82), Pos(1340,10));
  test(Color(182,4,82), Pos(1340,110));
  test(Color(182,4,82), Pos(1340,210));
  test(Color(182,4,83), Pos(1340,310));
  test(Color(176,82,3), Pos(1340,410));
  test(Color(176,82,3), Pos(1340,510));
  test(Color(176,82,3), Pos(1340,610));
  test(Color(85,87,174), Pos(1340,710));
  test(Color(85,87,174), Pos(1340,810));
  test(Color(84,86,174), Pos(1340,910));
}
catch(const std::exception& e)
{
  std::cerr << e.what() << '\n';
  return;
}


  std::cout << "Test Successful!\n";
  return;
}

void test::pixel_color_similar()
{
  cv::Mat img = cv::imread("assets/test/test.png", cv::IMREAD_COLOR);

 auto test = [img](Color col, Pos pos){
    if(!c::pixel_color_similar(img, pos, col, 0.9))
    {
      std::string error_msg = "Test failed at pos: (" + std::to_string(pos.x)+"," + std::to_string(pos.y) + ")";
      error_msg += "\nExpected " + col.get()+ ", but got: " + c::get_pixel(img,pos).get();
      throw std::runtime_error(error_msg.c_str());
    }
  };  
 
  try
  {
    test(Color(33,22,254), Pos(10,10));
    test(Color(13,17,239), Pos(10,110));
    test(Color(10,21,225), Pos(10,210));
    test(Color(34,21,243), Pos(10,310));
    test(Color(5,235,10), Pos(10,410));
    test(Color(10,231,5), Pos(10,510));
    test(Color(25,248,23), Pos(10,610));
    test(Color(233,239,2), Pos(10,710));
    test(Color(239,230,31), Pos(10,810));
    test(Color(243,240,1), Pos(10,910));
    test(Color(14,23,237), Pos(80,10));
    test(Color(54,7,253), Pos(80,110));
    test(Color(43,12,252), Pos(80,210));
    test(Color(47,11,219), Pos(80,310));
    test(Color(12,251,22), Pos(80,410));
    test(Color(6,218,22), Pos(80,510));
    test(Color(15,244,25), Pos(80,610));
    test(Color(230,237,10), Pos(80,710));
    test(Color(247,212,8), Pos(80,810));
    test(Color(236,243,39), Pos(80,910));
    test(Color(55,15,255), Pos(150,10));
    test(Color(26,5,228), Pos(150,110));
    test(Color(36,12,218), Pos(150,210));
    test(Color(64,19,219), Pos(150,310));
    test(Color(44,219,0), Pos(150,410));
    test(Color(43,213,18), Pos(150,510));
    test(Color(35,223,17), Pos(150,610));
    test(Color(234,236,46), Pos(150,710));
    test(Color(239,252,3), Pos(150,810));
    test(Color(227,231,39), Pos(150,910));
    test(Color(45,13,204), Pos(220,10));
    test(Color(63,23,216), Pos(220,110));
    test(Color(40,11,225), Pos(220,210));
    test(Color(51,15,206), Pos(220,310));
    test(Color(50,206,13), Pos(220,410));
    test(Color(46,222,21), Pos(220,510));
    test(Color(18,228,20), Pos(220,610));
    test(Color(239,236,22), Pos(220,710));
    test(Color(211,217,25), Pos(220,810));
    test(Color(237,221,54), Pos(220,910));
    test(Color(44,2,202), Pos(290,10));
    test(Color(78,14,190), Pos(290,110));
    test(Color(51,10,218), Pos(290,210));
    test(Color(64,1,240), Pos(290,310));
    test(Color(21,237,18), Pos(290,410));
    test(Color(19,225,5), Pos(290,510));
    test(Color(60,216,7), Pos(290,610));
    test(Color(218,213,64), Pos(290,710));
    test(Color(218,193,66), Pos(290,810));
    test(Color(199,213,36), Pos(290,910));
    test(Color(85,24,204), Pos(360,10));
    test(Color(51,2,207), Pos(360,110));
    test(Color(71,17,204), Pos(360,210));
    test(Color(89,8,199), Pos(360,310));
    test(Color(38,220,9), Pos(360,410));
    test(Color(27,223,10), Pos(360,510));
    test(Color(42,227,14), Pos(360,610));
    test(Color(206,227,52), Pos(360,710));
    test(Color(228,198,72), Pos(360,810));
    test(Color(197,197,77), Pos(360,910));
    test(Color(77,18,173), Pos(430,10));
    test(Color(76,2,172), Pos(430,110));
    test(Color(60,8,192), Pos(430,210));
    test(Color(63,10,219), Pos(430,310));
    test(Color(62,184,23), Pos(430,410));
    test(Color(38,179,25), Pos(430,510));
    test(Color(67,174,17), Pos(430,610));
    test(Color(210,182,60), Pos(430,710));
    test(Color(210,170,42), Pos(430,810));
    test(Color(197,209,50), Pos(430,910));
    test(Color(76,21,212), Pos(500,10));
    test(Color(86,6,178), Pos(500,110));
    test(Color(96,2,209), Pos(500,210));
    test(Color(74,10,196), Pos(500,310));
    test(Color(59,176,26), Pos(500,410));
    test(Color(58,173,18), Pos(500,510));
    test(Color(76,199,22), Pos(500,610));
    test(Color(169,161,44), Pos(500,710));
    test(Color(201,177,72), Pos(500,810));
    test(Color(178,208,90), Pos(500,910));
    test(Color(99,23,169), Pos(570,10));
    test(Color(76,23,173), Pos(570,110));
    test(Color(105,9,205), Pos(570,210));
    test(Color(88,17,155), Pos(570,310));
    test(Color(90,179,14), Pos(570,410));
    test(Color(78,156,9), Pos(570,510));
    test(Color(99,155,19), Pos(570,610));
    test(Color(199,170,65), Pos(570,710));
    test(Color(172,174,76), Pos(570,810));
    test(Color(199,168,91), Pos(570,910));
    test(Color(82,15,169), Pos(640,10));
    test(Color(81,15,177), Pos(640,110));
    test(Color(72,15,169), Pos(640,210));
    test(Color(85,23,164), Pos(640,310));
    test(Color(96,177,23), Pos(640,410));
    test(Color(98,194,16), Pos(640,510));
    test(Color(88,181,5), Pos(640,610));
    test(Color(37,240,14), Pos(640,710));
    test(Color(240,21,222), Pos(640,810));
    test(Color(168,146,71), Pos(640,910));
    test(Color(130,25,167), Pos(710,10));
    test(Color(128,7,178), Pos(710,110));
    test(Color(82,11,150), Pos(710,210));
    test(Color(96,9,144), Pos(710,310));
    test(Color(100,155,20), Pos(710,410));
    test(Color(98,142,25), Pos(710,510));
    test(Color(92,184,13), Pos(710,610));
    test(Color(13,245,163), Pos(710,710));
    test(Color(239,4,92), Pos(710,810));
    test(Color(139,138,113), Pos(710,910));
    test(Color(116,13,147), Pos(780,10));
    test(Color(120,3,145), Pos(780,110));
    test(Color(125,25,135), Pos(780,210));
    test(Color(139,19,164), Pos(780,310));
    test(Color(128,160,18), Pos(780,410));
    test(Color(110,163,16), Pos(780,510));
    test(Color(129,162,20), Pos(780,610));
    test(Color(14,215,248), Pos(780,710));
    test(Color(249,1,3), Pos(780,810));
    test(Color(153,152,116), Pos(780,910));
    test(Color(118,12,134), Pos(850,10));
    test(Color(126,5,156), Pos(850,110));
    test(Color(131,0,152), Pos(850,210));
    test(Color(114,20,120), Pos(850,310));
    test(Color(134,141,14), Pos(850,410));
    test(Color(118,154,5), Pos(850,510));
    test(Color(111,127,17), Pos(850,610));
    test(Color(165,143,123), Pos(850,710));
    test(Color(239,131,22), Pos(850,810));
    test(Color(132,159,114), Pos(850,910));
    test(Color(111,3,110), Pos(920,10));
    test(Color(117,22,139), Pos(920,110));
    test(Color(136,1,115), Pos(920,210));
    test(Color(154,28,132), Pos(920,310));
    test(Color(143,136,21), Pos(920,410));
    test(Color(103,158,2), Pos(920,510));
    test(Color(109,157,15), Pos(920,610));
    test(Color(163,19,236), Pos(920,710));
    test(Color(118,153,117), Pos(920,810));
    test(Color(119,130,124), Pos(920,910));
    test(Color(132,3,140), Pos(990,10));
    test(Color(161,26,102), Pos(990,110));
    test(Color(146,17,137), Pos(990,210));
    test(Color(115,0,125), Pos(990,310));
    test(Color(144,113,0), Pos(990,410));
    test(Color(132,116,19), Pos(990,510));
    test(Color(108,135,8), Pos(990,610));
    test(Color(102,143,148), Pos(990,710));
    test(Color(144,115,141), Pos(990,810));
    test(Color(127,121,116), Pos(990,910));
    test(Color(162,19,92), Pos(1060,10));
    test(Color(140,19,109), Pos(1060,110));
    test(Color(161,28,136), Pos(1060,210));
    test(Color(161,11,134), Pos(1060,310));
    test(Color(130,96,18), Pos(1060,410));
    test(Color(128,121,20), Pos(1060,510));
    test(Color(147,132,27), Pos(1060,610));
    test(Color(128,101,159), Pos(1060,710));
    test(Color(102,103,162), Pos(1060,810));
    test(Color(125,138,134), Pos(1060,910));
    test(Color(151,17,114), Pos(1130,10));
    test(Color(181,24,84), Pos(1130,110));
    test(Color(157,9,101), Pos(1130,210));
    test(Color(132,25,103), Pos(1130,310));
    test(Color(148,126,25), Pos(1130,410));
    test(Color(126,124,17), Pos(1130,510));
    test(Color(167,84,9), Pos(1130,610));
    test(Color(133,129,171), Pos(1130,710));
    test(Color(119,85,160), Pos(1130,810));
    test(Color(97,137,129), Pos(1130,910));
    test(Color(151,14,92), Pos(1200,10));
    test(Color(158,7,122), Pos(1200,110));
    test(Color(187,17,76), Pos(1200,210));
    test(Color(187,20,82), Pos(1200,310));
    test(Color(140,89,8), Pos(1200,410));
    test(Color(132,110,13), Pos(1200,510));
    test(Color(175,77,26), Pos(1200,610));
    test(Color(120,90,179), Pos(1200,710));
    test(Color(112,118,140), Pos(1200,810));
    test(Color(93,107,162), Pos(1200,910));
    test(Color(189,18,80), Pos(1270,10));
    test(Color(154,17,115), Pos(1270,110));
    test(Color(158,0,85), Pos(1270,210));
    test(Color(159,4,73), Pos(1270,310));
    test(Color(189,83,0), Pos(1270,410));
    test(Color(153,99,9), Pos(1270,510));
    test(Color(180,102,24), Pos(1270,610));
    test(Color(112,93,157), Pos(1270,710));
    test(Color(110,106,155), Pos(1270,810));
    test(Color(85,82,179), Pos(1270,910));
    test(Color(206,26,79), Pos(1340,10));
    test(Color(200,11,77), Pos(1340,110));
    test(Color(185,23,90), Pos(1340,210));
    test(Color(196,15,64), Pos(1340,310));
    test(Color(178,90,8), Pos(1340,410));
    test(Color(162,104,23), Pos(1340,510));
    test(Color(174,95,20), Pos(1340,610));
    test(Color(91,65,191), Pos(1340,710));
    test(Color(85,96,198), Pos(1340,810));
    test(Color(84,64,154), Pos(1340,910));

  }
  catch(const std::exception& e)
  {
    std::cerr << e.what() << '\n';
    return;
  }

  std::cout << "Test Successful!\n";


}
